# Architecture and target configs
CONFIG_TARGET_LOGOSNI8=y
CONFIG_ARCH_MX6=y
CONFIG_MX6S=y
CONFIG_ARM=y
CONFIG_ARCH_MISC_INIT=y

CONFIG_VERSION_VARIABLE=y

# Memory and address settings
CONFIG_SYS_TEXT_BASE=0x17800000
CONFIG_SYS_MALLOC_F_LEN=0x4000
CONFIG_NR_DRAM_BANKS=1

# Enabled the board_Early_init function to set up GPIO and UART for early testing
CONFIG_BOARD_EARLY_INIT_R=y
# enable board late init
CONFIG_BOARD_LATE_INIT=y

# UART Config
CONFIG_MXC_UART=y

CONFIG_OF_EMBED=y

# Enable LTO - enabled for release - removes debug functionality
CONFIG_LTO=y
CONFIG_CC_OPTIMIZE_FOR_SIZE=y

# Configuration of SPL
CONFIG_SPL=y
CONFIG_SPL_LIBCOMMON_SUPPORT=y
CONFIG_SPL_LIBGENERIC_SUPPORT=y
CONFIG_SPL_TEXT_BASE=0x00908000
#CONFIG_SPL_LIBDISK_SUPPORT=y
CONFIG_SPL_USE_TINY_PRINTF=n

# Use SPL device tree
#CONFIG_SPL_OF_CONTROL=y

# SPL Board Init
CONFIG_SPL_BOARD_INIT=y

# Boot from SD Card
CONFIG_SUPPORT_EMMC_BOOT=y
CONFIG_SPL_MMC_BOOT=y
CONFIG_SYS_MMCSD_FS_BOOT_PARTITION=3
CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_PARTITION=1

# Further SPL defines for MMC Boot
CONFIG_SPL_MMC=y
CONFIG_MMC=y
#CONFIG_SPL_SERIAL_SUPPORT=y #comment out for production

# Clock Devices
CONFIG_SPL_BLK=n
CONFIG_SPL_MMC_SUPPORT=y
CONFIG_SPL_MMC_TINY=y #Mininum requirment of mmc support

# Enable SPL DM
#CONFIG_SPL_DM=y

# Disable all DMs
#CONFIG_SPL_DM_I2C=n
#CONFIG_SPL_DM_GPIO=n
#CONFIG_SPL_DM_INLINE_OFNODE=n
#CONFIG_SPL_DM_MMC=n
#CONFIG_SPL_DM_SERIAL=n

#CONFIG_SPL_I2C=y
CONFIG_SPL_GPIO=y
CONFIG_SPL_SEPARATE_BSS=y

# Kernel
CONFIG_SPL_OS_BOOT=y
CONFIG_SPL_ALLOC_BD=y
CONFIG_SYS_SPL_MALLOC_START=y

# Environment Support
CONFIG_ENV_IS_IN_MMC=y
CONFIG_SYS_MMC_ENV_DEV=2
CONFIG_SYS_MMC_ENV_PART=1
CONFIG_SYS_REDUNDAND_ENVIRONMENT=y
# Last 64 KB off first eMMC boot partition is for user environment variables.
# Two 32 KB areas for redundancy.
CONFIG_ENV_SIZE=0x8000
# Negative value means backwards from the end.
CONFIG_ENV_OFFSET=0xFFFF0000
CONFIG_ENV_OFFSET_REDUND=0xFFFF8000
CONFIG_SYS_RELOC_GD_ENV_ADDR=y
CONFIG_ENV_VARS_UBOOT_RUNTIME_CONFIG=y
CONFIG_SPL_ENV_SUPPORT=y
CONFIG_SPL_ENV_IS_IN_MMC=y

# Enable full uart support in spl - Debug support
#CONFIG_SPL_SERIAL_PRESENT=y
#CONFIG_SILENT_CONSOLE=y
#CONFIG_REQUIRE_SERIAL_CONSOLE=y
#CONFIG_SPECIFY_CONSOLE_INDEX=y
CONFIG_SPL_BUILD=y

# Boot Count for SPL
CONFIG_SPL_BOOTCOUNT_LIMIT=y

# Additional Options
CONFIG_SYS_EXTRA_OPTIONS="IMX_CONFIG=board/logos/ni8/logosni8.cfg,DDR_MB=512"

# Boot Configs
CONFIG_SUPPORT_RAW_INITRD=y

# Lower bootdelay to 0 and comment CONFIG_ZERO_BOOTDELAY_CHECK
CONFIG_BOOTDELAY=0
CONFIG_ZERO_BOOTDELAY_CHECK=y

# Watchdog Configs
# This config changes reset time - after calling reset it will wait 30s
CONFIG_WATCHDOG_TIMEOUT_MSECS=5000
CONFIG_IMX_WATCHDOG=y
CONFIG_SYSRESET_WATCHDOG=y
CONFIG_WDT_CDNS=y

# Config Boot Count - Save in FRAM - I2C bus 3
#CONFIG_SYS_BOOTCOUNT_ADDR=0x10008000
CONFIG_BOOTCOUNT_ENV=y
#CONFIG_SYS_BOOTCOUNT_I2C_BUS=3
#CONFIG_SYS_BOOTCOUNT_I2C_ADDR=0x51
CONFIG_BOOTCOUNT_ALEN=2
CONFIG_BOOTCOUNT_LIMIT=y
CONFIG_BOOTCOUNT_BOOTLIMIT=3
#CONFIG_BOOTCOUNT_I2C=y
# Bootcount DM i2c
#CONFIG_DM_BOOTCOUNT_I2C_EEPROM=y
#CONFIG_DM_BOOTCOUNT=y

#CONFIG_CMD_BOOTCOUNT=y

# HAB - High Assurance Boot
CONFIG_IMX_HAB=y
CONFIG_SECURE_BOOT=y

# Enable the hush shell, if, then, else logic in scripts
CONFIG_HUSH_PARSER=y

# Freescale/NXP i.MX uSDHC/eSDHC controller support
CONFIG_FSL_USDHC=y
CONFIG_FSL_ESDHC_IMX=y

# Configurations of device tree - Make it possible to do runtime configuration via the device tree (uncomment to use device tree)
CONFIG_OF_CONTROL=y

# Set default Device Tree
CONFIG_DEFAULT_DEVICE_TREE="imx6dl-nicore8"

# Driver models - (DM)'s
CONFIG_DM=y
CONFIG_DM_I2C=y

# DM Watchdog support
CONFIG_WDT=y

# Network Commands
CONFIG_NET=n

# Comment following in later, for speed optimization
CONFIG_UBI_SILENCE_MSG=y
# TODO: Measure with or without L2 cache enabled and choose best option for our platform and SPL.
# TODO: Make sure all display support is disabled (DCU) for SPL.

# Undef for Size optimisation
CONFIG_CMD_FDT=n
CONFIG_CMD_EDITENV=n
CONFIG_DM_WARN=n
CONFIG_CMD_SLEEP=n
CONFIG_CMD_SETEXPR=n
CONFIG_CMD_BMODE=n
CONFIG_CMD_DEKBLOB=n
CONFIG_CMD_BOOTEFI=n
CONFIG_CMD_BOOTEFI_HELLO_COMPILE=n
CONFIG_BOOTM_NETBSD=n
CONFIG_BOOTM_PLAN9=n
CONFIG_BOOTM_RTEMS=n
CONFIG_BOOTM_VXWORKS=n
CONFIG_CMD_ELF=n
CONFIG_CMD_GO=n
CONFIG_CMD_IMI=n
CONFIG_CMD_XIMG=n
CONFIG_CMD_SOURCE=n
CONFIG_MMC_VERBOSE=n
CONFIG_LIB_UUID=n
CONFIG_SPL_SPRINTF=n
CONFIG_REGEX=n
CONFIG_ZLIB=n
CONFIG_GZIP=n
CONFIG_GENERATE_SMBIOS_TABLE=n
CONFIG_EFI_LOADER=n
CONFIG_CMD_BOOTEFI_BOOTMGR=n
CONFIG_EFI_DEVICE_PATH_TO_TEXT=n
CONFIG_EFI_DEVICE_PATH_UTIL=n
CONFIG_EFI_DT_FIXUP=n
CONFIG_EFI_LOADER_HII=n
CONFIG_EFI_UNICODE_COLLATION_PROTOCOL2=n
CONFIG_EFI_UNICODE_CAPITALIZATION=n
CONFIG_EFI_GRUB_ARM32_WORKAROUND=n
CONFIG_EFI_LOAD_FILE2_INITRD=n
CONFIG_LMB=y
CONFIG_OF_LIBFDT=n
CONFIG_DM_DEVICE_REMOVE=n
CONFIG_DM_STDIO=n

CONFIG_OF_TRANSLATE=n
CONFIG_DM_DEV_READ_INLINE=n
CONFIG_OF_SEPARATE=n#
CONFIG_SUPPORT_OF_CONTROL=n
CONFIG_DTC=n
CONFIG_CMD_HASH=n
CONFIG_CMD_BDI=n
CONFIG_CMD_CONSOLE=n
CONFIG_CMD_BOOTD=n
CONFIG_CMD_BOOTM=n
CONFIG_CMD_RUN=n
CONFIG_CMD_EXPORTENV=n
CONFIG_CMD_IMPORTENV=n
CONFIG_CMD_CRC32=n
CONFIG_CMD_MEMORY=n
CONFIG_CMD_FUSE=n
CONFIG_CMD_LOADB=n
CONFIG_CMD_LOADS=n
CONFIG_CMD_MMC=n
CONFIG_CMD_ECHO=n
CONFIG_CMD_CACHE=n
CONFIG_CMD_BLOCK_CACHE=n
CONFIG_CMD_ITEST=n
CONFIG_SPRINTF=n
CONFIG_STRTO=n
CONFIG_SPL_STRTO=n
CONFIG_CHARSET=n
# Disable advanced console features
CONFIG_CMDLINE_EDITING=n
CONFIG_AUTO_COMPLETE=n
CONFIG_SYS_LONGHELP=n
CONFIG_SYS_XTRACE=n

CONFIG_INPUT=n
CONFIG_CMD_ENV_EXISTS=n
